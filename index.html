<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helmy Card - Ø³Ø­Ø¨ Ø§Ù„Ø±Ø§ØªØ¨</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&display=swap');
        
        :root {
            --gold: linear-gradient(135deg, #bf953f 0%, #fcf6ba 45%, #b38728 70%, #fbf5b7 100%);
            --bg: #050505;
            --card-bg: #0d0d0d;
            --text-gold: #fcf6ba;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg);
            background-image: radial-gradient(circle at top left, #1a1a1a, #050505);
            color: #f8fafc; margin: 0; display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px;
        }

        .form-card {
            background: var(--card-bg);
            border: 1px solid rgba(191, 149, 63, 0.3);
            border-radius: 30px;
            padding: 30px; width: 100%; max-width: 480px; 
            box-shadow: 0 25px 50px rgba(0,0,0,0.9);
            position: relative;
        }

        .header { text-align: center; margin-bottom: 25px; }
        .header h1 { 
            font-size: 32px; font-weight: 900; margin: 0;
            background: var(--gold); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .warning-text { color: #ff4d4d; font-weight: bold; font-size: 14px; margin-top: 8px; display: block; }
        .intro-text { font-size: 13px; color: #94a3b8; line-height: 1.6; margin-top: 10px; }
        
        .copy-box { 
            background: rgba(191, 149, 63, 0.08); padding: 15px; border-radius: 15px; 
            border: 1px dashed #bf953f; margin-top: 15px; font-size: 14px; cursor: pointer;
            transition: 0.3s;
        }
        .copy-box:hover { background: rgba(191, 149, 63, 0.15); }
        .copy-box b { color: var(--text-gold); font-size: 20px; letter-spacing: 1px; }

        .input-group { margin-bottom: 18px; text-align: right; }
        label { display: block; margin-bottom: 6px; font-size: 13px; color: var(--text-gold); font-weight: bold; }
        .hint-text { color: #ff4d4d; font-size: 11px; margin-top: 5px; display: block; font-weight: bold; }

        input, select {
            width: 100%; background: #151515; border: 1px solid rgba(191, 149, 63, 0.2);
            border-radius: 12px; padding: 12px; color: white; font-size: 15px; box-sizing: border-box; outline: none;
            transition: 0.3s; font-family: 'Tajawal', sans-serif;
        }
        input:focus { border-color: #fcf6ba; box-shadow: 0 0 10px rgba(191, 149, 63, 0.2); }
        
        .file-label {
            display: block; background: #1a1a1a; border: 2px dashed rgba(191, 149, 63, 0.5);
            border-radius: 12px; padding: 15px; text-align: center; cursor: pointer; transition: 0.3s; color: #fcf6ba; font-weight: bold;
        }

        .calc-box { 
            background: rgba(191, 149, 63, 0.05); padding: 15px; border-radius: 15px; 
            text-align: center; margin: 15px 0; border: 1px solid rgba(191, 149, 63, 0.1); 
        }
        .calc-value { font-size: 22px; font-weight: 700; color: #fff; }

        button#submitBtn {
            width: 100%; padding: 16px; background: var(--gold);
            border: none; border-radius: 12px; color: #000; font-size: 18px; font-weight: 700; cursor: pointer; transition: 0.3s;
        }

        /* Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© */
        .admin-trigger { margin-top: 20px; text-align: center; border-top: 1px solid #222; padding-top: 10px; }
        .admin-btn { color: #444; font-size: 11px; cursor: pointer; text-decoration: underline; }
        .admin-panel { display: none; background: #000; border: 1px solid #bf953f; border-radius: 20px; padding: 20px; margin-top: 15px; text-align: right; }
        .stat-item { background: #0a0a0a; border: 1px solid #222; padding: 10px; border-radius: 10px; margin-bottom: 8px; }
        .stat-item span { color: #888; font-size: 11px; display: block; }
        .stat-item b { color: var(--text-gold); font-size: 15px; }

        #invoiceOverlay {
            display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 1000; align-items: center; justify-content: center; padding: 20px;
        }
        .invoice-box { 
            background: #0d0d0d; color: #fff; width: 100%; max-width: 400px; padding: 30px; 
            border-radius: 25px; text-align: center; border: 2px solid #bf953f; 
        }
        .inv-header { font-size: 24px; font-weight: 900; background: var(--gold); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 20px; }
        .inv-item { display: flex; justify-content: space-between; border-bottom: 1px solid rgba(191, 149, 63, 0.1); padding: 12px 0; font-size: 14px; }
        .inv-label { color: #94a3b8; }
        .inv-value { color: #fcf6ba; font-weight: bold; }
        .thanks-note { margin-top: 25px; font-size: 13px; color: #fcf6ba; line-height: 1.6; font-style: italic; }

        #copyToast {
            visibility: hidden; min-width: 100px; background-color: #bf953f; color: #000; text-align: center;
            border-radius: 50px; padding: 8px; position: fixed; z-index: 1001; bottom: 30px; left: 50%;
            transform: translateX(-50%); font-size: 12px; font-weight: bold;
        }
        #copyToast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 1.5s; }
    </style>
</head>
<body>

<div class="form-card">
    <div class="header">
        <h1>Helmy Card ğŸ”—</h1>
        <span class="warning-text">ÙŠØ³ØªØºØ±Ù‚ ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ§Ø±Ø¬Øª ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£Ù…ÙˆØ§Ù„ 24 Ø³Ø§Ø¹Ø©</span>
        <div class="intro-text">Ø¨Ø¹Ø¯ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø³Ø­Ø¨ Ø£Ù†Øª ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø´Ø±ÙˆØ· Ø§Ù„Ø®Ø¯Ù…Ø© Ø´ÙƒØ±Ø§Ù‹ Ù„Ø«Ù‚ØªÙƒÙ… _ Helmy Card ğŸ”—</div>
        <div class="copy-box" onclick="copyId()">
            ID Ø³Ø­Ø¨ Helmy: <b id="adminId">800050</b><br>
            Ø§Ù„Ø§Ø³Ù…: <b>Helmy fire</b><br>
            <small>Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù†Ø³Ø® Ø§Ù„Ø§ÙŠØ¯ÙŠ ÙˆØ§Ø±Ø³Ù„ Ø§Ù„Ø±Ø§ØªØ¨ ğŸ‘†</small>
        </div>
    </div>

    <div class="input-group">
        <label>ğŸ†” Ø§Ù„ÙŠ Ø³Ø­Ø¨Øª Ù…Ù†Ùˆ id</label>
        <input type="text" id="user_id" placeholder="Ø£Ø¯Ø®Ù„ ID Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ" required>
    </div>

    <div class="input-group">
        <label>ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„ÙˆÙƒÙŠÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
        <input type="text" id="agent_name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ÙˆÙƒÙŠÙ„ Ø¥Ù† ÙˆØ¬Ø¯">
    </div>

    <div class="input-group">
        <label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>
        <select id="method" onchange="calculate()">
            <option value="ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´">ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´</option>
            <option value="Ø§ØªØµØ§Ù„Ø§Øª ÙƒØ§Ø´">Ø§ØªØµØ§Ù„Ø§Øª ÙƒØ§Ø´</option>
            <option value="Ø£ÙˆØ±Ù†Ø¬ ÙƒØ§Ø´">Ø£ÙˆØ±Ù†Ø¬ ÙƒØ§Ø´</option>
            <option value="ÙƒÙˆØ¯ Ø§Ù„ÙˆÙƒÙŠÙ„ ÙÙŠ Ø§Ù„Ù…Ù†ØµØ©">ÙƒÙˆØ¯ Ø§Ù„ÙˆÙƒÙŠÙ„ ÙÙŠ Ø§Ù„Ù…Ù†ØµØ© (Ø³Ø¹Ø± Ø®Ø§Øµ)</option>
        </select>
    </div>

    <div class="input-group">
        <label>Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±</label>
        <input type="number" id="dollars" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ø¯Ø¯ Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±Ø§Øª" oninput="calculate()" required>
    </div>

    <div class="calc-box">
        <div class="calc-value" id="res-egp">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 0.00 Ø¬.Ù…</div>
    </div>

    <div class="input-group">
        <label>Ø±Ù‚Ù… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</label>
        <input type="text" id="wallet" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø°ÙŠ Ø³ÙŠØµÙ„Ùƒ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ù…Ø¨Ù„Øº" required>
        <span class="hint-text">Ø§Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ù‚Ù… ØºÙŠØ± 010 ÙŠØªÙ… Ø®ØµÙ… Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.</span>
    </div>

    <div class="input-group">
        <label>Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ±Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ)</label>
        <label for="screenshot" class="file-label" id="fileLabel">
            <span id="labelText">ğŸ“¸ Ø§Ø¶ØºØ· Ù„Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„</span>
            <input type="file" id="screenshot" accept="image/*" style="display:none" onchange="updateLabel()" required>
        </label>
    </div>

    <button onclick="submitForm()" id="submitBtn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† ğŸš€</button>

    <div class="admin-trigger">
        <span class="admin-btn" onclick="openAdminPanel()">âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© (Ø§Ù„ÙØ±ÙŠÙ‚)</span>
        <div id="adminPanel" class="admin-panel">
            <div id="adminClock" style="font-size:10px; color:#555; text-align:center; margin-bottom:10px;"></div>
            <div class="stat-item"><span>Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ù‡Ø± (Ø´ÙŠØª 1)</span> <b id="s1-mon">0</b></div>
            <div class="stat-item"><span>Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ù‡Ø± (Ø´ÙŠØª 2)</span> <b id="s2-mon">0</b></div>
            <div class="stat-item" style="border-color: #bf953f;"><span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙŠÙˆÙ…</span> <b id="day-tot">0</b></div>
            <div style="font-size:9px; color:#444; text-align:center;">Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…ÙØ¹Ù„ Ø¹Ù†Ø¯ 498 Ø·Ù„Ø¨</div>
        </div>
    </div>
</div>

<div id="copyToast">ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø£ÙŠØ¯ÙŠ Ø¨Ù†Ø¬Ø§Ø­ âœ…</div>

<div id="invoiceOverlay">
    <div class="invoice-box">
        <div class="inv-header">ÙØ§ØªÙˆØ±Ø© Ø³Ø­Ø¨ Ø±Ø§ØªØ¨ âœ…</div>
        <div class="inv-item"><span class="inv-label">ID Ø§Ù„Ø­Ø³Ø§Ø¨:</span> <span class="inv-value" id="inv-uid"></span></div>
        <div class="inv-item"><span class="inv-label">Ø§Ø³Ù… Ø§Ù„ÙˆÙƒÙŠÙ„:</span> <span class="inv-value" id="inv-agent"></span></div>
        <div class="inv-item"><span class="inv-label">Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±:</span> <span class="inv-value" id="inv-usd"></span></div>
        <div class="inv-item"><span class="inv-label">Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ù…ØµØ±ÙŠ:</span> <span class="inv-value" id="inv-egp"></span></div>
        <div class="inv-item"><span class="inv-label">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…:</span> <span class="inv-value" id="inv-method"></span></div>
        <div class="inv-item"><span class="inv-label">Ø§Ù„ÙŠÙˆÙ…:</span> <span class="inv-value" id="inv-day"></span></div>
        <div class="inv-item"><span class="inv-label">Ø§Ù„ØªØ§Ø±ÙŠØ®:</span> <span class="inv-value" id="inv-time" style="font-size: 11px;"></span></div>
        <div class="thanks-note">Ø´ÙƒØ±Ù‹Ø§ Ù„Ø«Ù‚ØªÙƒ Ø¨Ù†Ø§ ÙˆØ¨Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Helmy Card ğŸ”—<br>Ù†ØªÙ…Ù†Ù‰ Ù„Ùƒ Ø¯Ø§Ø¦Ù…Ø§Ù‹ ØªØ¬Ø±Ø¨Ø© Ù…Ù…ÙŠØ²Ø© ÙˆÙ…ÙˆÙÙ‚Ø©. â˜•</div>
        <button onclick="location.reload()" style="background:var(--gold); color:#000; border:none; width:100%; padding:15px; border-radius:12px; cursor:pointer; font-weight: bold; margin-top: 20px;">Ø¥ØºÙ„Ø§Ù‚ ÙˆØ­ÙØ¸</button>
    </div>
</div>

<script>
    const BOT_TOKEN = "8571615952:AAGDBzrw8hRwDGS7u2aa-dpLEsDOufEprP4";
    const CHAT_ID = "1682899853";
    const S1_URL = "https://sheetdb.io/api/v1/m5t10sp8hf9e6";
    const S2_URL = "https://sheetdb.io/api/v1/7a0j561hvwvfc";
    const LIMIT = 498;

    function updateLabel() {
        const file = document.getElementById('screenshot').files[0];
        if(file) document.getElementById('labelText').innerText = "âœ… ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: " + file.name;
    }

    function calculate() {
        const usd = document.getElementById('dollars').value;
        const rate = (document.getElementById('method').value.includes("ÙƒÙˆØ¯")) ? 46.50 : 45;
        const egp = (usd * rate).toFixed(2);
        document.getElementById('res-egp').innerText = usd > 0 ? "Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: " + egp + " Ø¬.Ù…" : "Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 0.00 Ø¬.Ù…";
    }

    function copyId() {
        navigator.clipboard.writeText(document.getElementById('adminId').innerText).then(() => {
            const toast = document.getElementById("copyToast"); toast.className = "show";
            setTimeout(() => { toast.className = ""; }, 2000);
        });
    }

    async function openAdminPanel() {
        if(prompt("ÙƒÙ„Ù…Ø© Ø³Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:") !== "1234") return;
        document.getElementById('adminPanel').style.display = 'block';
        const now = new Date();
        document.getElementById('adminClock').innerText = "ØªÙˆÙ‚ÙŠØª Ø§Ù„Ù†Ø¸Ø§Ù…: " + now.toLocaleString('ar-EG');
        try {
            const [r1, r2] = await Promise.all([fetch(S1_URL), fetch(S2_URL)]);
            const d1 = await r1.json(); const d2 = await r2.json();
            const curMonth = now.getMonth() + 1;
            const todayStr = now.toLocaleDateString('en-GB');
            let s1M = 0, s2M = 0, today = 0;
            d1.forEach(r => {
                if(!r["Ø§Ù„ØªØ§Ø±ÙŠØ®"]) return;
                const dPart = r["Ø§Ù„ØªØ§Ø±ÙŠØ®"].split(',')[0].trim();
                if(parseInt(dPart.split('/')[1]) === curMonth) s1M++;
                if(dPart === todayStr) today++;
            });
            d2.forEach(r => {
                if(!r["Ø§Ù„ØªØ§Ø±ÙŠØ®"]) return;
                const dPart = r["Ø§Ù„ØªØ§Ø±ÙŠØ®"].split(',')[0].trim();
                if(parseInt(dPart.split('/')[1]) === curMonth) s2M++;
                if(dPart === todayStr) today++;
            });
            document.getElementById('s1-mon').innerText = s1M;
            document.getElementById('s2-mon').innerText = s2M;
            document.getElementById('day-tot').innerText = today;
        } catch(e) {}
    }

    async function submitForm() {
        const btn = document.getElementById('submitBtn');
        const uid = document.getElementById('user_id').value;
        const agent = document.getElementById('agent_name').value || "Ù„Ø§ ÙŠÙˆØ¬Ø¯";
        const usd = document.getElementById('dollars').value;
        const wallet = document.getElementById('wallet').value;
        const photo = document.getElementById('screenshot').files[0];
        const method = document.getElementById('method').value;

        if(!uid || !usd || !wallet || !photo) return alert("ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø§Ù†Ø§Øª ÙˆØ¥Ø±ÙØ§Ù‚ Ø§Ù„ØµÙˆØ±Ø©!");

        btn.disabled = true;
        btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ù…Ø§ÙŠØ© ÙˆØ§Ù„Ø¥Ø±Ø³Ø§Ù„...";

        try {
            const res1 = await fetch(S1_URL);
            const data1 = await res1.json();
            const now = new Date();
            const curMonth = now.getMonth() + 1;

            // Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø± (5 Ø£ÙŠØ§Ù…)
            const fiveDaysAgo = new Date(); fiveDaysAgo.setDate(fiveDaysAgo.getDate() - 5);
            const isDup = data1.some(r => {
                if(!r["Ø§Ù„ØªØ§Ø±ÙŠØ®"]) return false;
                const p = r["Ø§Ù„ØªØ§Ø±ÙŠØ®"].split(',')[0].split('/');
                return r["Ø§Ù„Ø£ÙŠØ¯ÙŠ"] === uid && new Date(p[2], p[1]-1, p[0]) >= fiveDaysAgo;
            });

            if(isDup) {
                alert("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù‡Ø°Ø§ Ø§Ù„Ø£ÙŠØ¯ÙŠ Ø³Ø­Ø¨ Ø®Ù„Ø§Ù„ Ø§Ù„Ù€ 5 Ø£ÙŠØ§Ù… Ø§Ù„Ù…Ø§Ø¶ÙŠØ©.");
                btn.disabled = false; btn.innerText = "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† ğŸš€";
                return;
            }

            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø´ÙŠØª Ø§Ù„Ù†Ø´Ø· Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ù‡Ø± ÙÙŠ Ø´ÙŠØª 1
            const s1MonthCount = data1.filter(r => {
                if(!r["Ø§Ù„ØªØ§Ø±ÙŠØ®"]) return false;
                return parseInt(r["Ø§Ù„ØªØ§Ø±ÙŠØ®"].split(',')[0].split('/')[1]) === curMonth;
            }).length;

            const activeUrl = s1MonthCount >= LIMIT ? S2_URL : S1_URL;
            const dayName = ["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"][now.getDay()];
            const dateStr = now.toLocaleDateString('en-GB') + ", " + now.toLocaleTimeString('ar-EG');
            const rate = (method.includes("ÙƒÙˆØ¯")) ? 46.50 : 45;
            const egpVal = (usd * rate).toFixed(2);

            // Ø¥Ø±Ø³Ø§Ù„ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
            const fd = new FormData();
            fd.append('chat_id', CHAT_ID); fd.append('photo', photo);
            fd.append('caption', `ğŸ§¾ *Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø¬Ø¯ÙŠØ¯ Helmy Card*\n\nğŸ†” *ID:* \`${uid}\`\nğŸ‘¤ *Ø§Ù„ÙˆÙƒÙŠÙ„:* ${agent}\nğŸ’µ *Ø§Ù„Ù…Ø¨Ù„Øº:* ${usd} $\nğŸ‡ªğŸ‡¬ *Ø§Ù„Ù…ØµØ±ÙŠ:* ${egpVal} Ø¬.Ù…\nğŸ’³ *Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©:* ${method}\nğŸ¦ *Ø§Ù„Ù…Ø­ÙØ¸Ø©:* ${wallet}\nğŸ“… *Ø§Ù„ÙŠÙˆÙ…:* ${dayName}\nâ° *Ø§Ù„ØªØ§Ø±ÙŠØ®:* ${dateStr}`);
            fd.append('parse_mode', 'Markdown');
            await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, { method: 'POST', body: fd });

            // Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø´ÙŠØª
            await fetch(activeUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ data: [{
                    "Ø§Ù„Ø£ÙŠØ¯ÙŠ": uid, "Ø§Ø³Ù… Ø§Ù„ÙˆÙƒÙŠÙ„": agent, "Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±": usd + " $",
                    "Ø§Ù„Ù…ØµØ±ÙŠ": egpVal + " Ø¬.Ù…", "Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø³Ø­Ø¨": method,
                    "Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙØ¸Ø©": "'" + wallet, "Ø§Ù„ØªØ§Ø±ÙŠØ®": dateStr, "Ø§Ù„ÙŠÙˆÙ…": dayName
                }]})
            });

            // Ù…Ù„Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„ÙØ®Ù…Ø©
            document.getElementById('inv-uid').innerText = uid;
            document.getElementById('inv-agent').innerText = agent;
            document.getElementById('inv-usd').innerText = usd + " $";
            document.getElementById('inv-egp').innerText = egpVal + " Ø¬.Ù…";
            document.getElementById('inv-method').innerText = method;
            document.getElementById('inv-day').innerText = dayName;
            document.getElementById('inv-time').innerText = dateStr;
            document.getElementById('invoiceOverlay').style.display = 'flex';

        } catch(e) { alert("Ø®Ø·Ø£ ØªÙ‚Ù†ÙŠ!"); btn.disabled = false; }
    }
</script>
</body>
</html>
